import{j as e,r as i}from"./vendor-C6dEa9Ot.js";import{P as N}from"./index-DV-SVJ1v.js";import{R as $,V as K,W as Q,m as Z,Y as X,f as ee,Z as te,b as se,_ as ne,$ as ie}from"./icons-B4mvP4Aa.js";import"./charts-DMvJngN5.js";const ae="_container_n2ty8_1",oe="_pageHeader_n2ty8_11",le="_headerLeft_n2ty8_19",re="_headerIcon_n2ty8_25",ce="_headerActions_n2ty8_45",de="_iconBtn_n2ty8_50",ue="_iconBtnActive_n2ty8_70",me="_badge_n2ty8_76",pe="_savedPanel_n2ty8_91",xe="_noSaved_n2ty8_103",he="_savedList_n2ty8_110",ge="_savedItem_n2ty8_116",_e="_savedItemBtn_n2ty8_121",ye="_savedPeptide_n2ty8_140",je="_savedDetails_n2ty8_145",ve="_deleteBtn_n2ty8_150",fe="_inputGroup_n2ty8_165",be="_label_n2ty8_170",Ce="_input_n2ty8_165",Ne="_inputWithUnit_n2ty8_198",Be="_unitLabel_n2ty8_208",ke="_autocompleteWrapper_n2ty8_217",Se="_chevron_n2ty8_221",Ae="_chevronUp_n2ty8_231",we="_autocomplete_n2ty8_217",We="_autocompleteItem_n2ty8_249",Ue="_peptideCategory_n2ty8_271",Ie="_peptideHint_n2ty8_279",Me="_quickButtons_n2ty8_286",De="_quickBtn_n2ty8_293",Pe="_quickBtnActive_n2ty8_310",Le="_doseInputRow_n2ty8_317",Te="_unitToggle_n2ty8_326",$e="_unitBtn_n2ty8_333",Ge="_unitBtnActive_n2ty8_353",qe="_syringeTypes_n2ty8_359",Re="_syringeBtn_n2ty8_365",Ve="_syringeBtnActive_n2ty8_385",Ee="_resultContainer_n2ty8_392",ze="_warning_n2ty8_402",Fe="_resultCard_n2ty8_413",Oe="_resultLabel_n2ty8_418",He="_resultValue_n2ty8_428",Ye="_resultWarning_n2ty8_440",Je="_resultUnit_n2ty8_444",Ke="_details_n2ty8_451",Qe="_detailRow_n2ty8_460",Ze="_dosesValue_n2ty8_478",Xe="_saveBtn_n2ty8_484",et="_infoBox_n2ty8_508",t={container:ae,pageHeader:oe,headerLeft:le,headerIcon:re,headerActions:ce,iconBtn:de,iconBtnActive:ue,badge:me,savedPanel:pe,noSaved:xe,savedList:he,savedItem:ge,savedItemBtn:_e,savedPeptide:ye,savedDetails:je,deleteBtn:ve,inputGroup:fe,label:be,input:Ce,inputWithUnit:Ne,unitLabel:Be,autocompleteWrapper:ke,chevron:Se,chevronUp:Ae,autocomplete:we,autocompleteItem:We,peptideCategory:Ue,peptideHint:Ie,quickButtons:Me,quickBtn:De,quickBtnActive:Pe,doseInputRow:Le,unitToggle:Te,unitBtn:$e,unitBtnActive:Ge,syringeTypes:qe,syringeBtn:Re,syringeBtnActive:Ve,resultContainer:Ee,warning:ze,resultCard:Fe,resultLabel:Oe,resultValue:He,resultWarning:Ye,resultUnit:Je,details:Ke,detailRow:Qe,dosesValue:Ze,saveBtn:Xe,infoBox:et},tt=({units:a,maxUnits:p=100})=>{const y=Math.min(Math.max(a,0),p),x=200,b=x/p,u=y*b;return e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"30px 20px"},children:[e.jsxs("svg",{width:"350",height:"140",viewBox:"0 0 350 140",style:{filter:"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.3))"},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"barrelGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(255, 255, 255, 0.15)"}),e.jsx("stop",{offset:"50%",stopColor:"rgba(255, 255, 255, 0.05)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(255, 255, 255, 0.12)"})]}),e.jsxs("linearGradient",{id:"liquidGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(59, 130, 246, 0.8)"}),e.jsx("stop",{offset:"50%",stopColor:"rgba(59, 130, 246, 0.6)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(6, 182, 212, 0.7)"})]}),e.jsxs("linearGradient",{id:"plungerGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4b5563"}),e.jsx("stop",{offset:"50%",stopColor:"#374151"}),e.jsx("stop",{offset:"100%",stopColor:"#4b5563"})]}),e.jsxs("linearGradient",{id:"needleGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#9ca3af"}),e.jsx("stop",{offset:"50%",stopColor:"#d1d5db"}),e.jsx("stop",{offset:"100%",stopColor:"#6b7280"})]}),e.jsxs("linearGradient",{id:"reflection",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"rgba(255, 255, 255, 0.4)"}),e.jsx("stop",{offset:"100%",stopColor:"rgba(255, 255, 255, 0)"})]})]}),e.jsxs("g",{children:[e.jsx("rect",{x:"35",y:"58",width:"20",height:"24",rx:"2",fill:"#e5e7eb",stroke:"#9ca3af",strokeWidth:"1"}),e.jsx("polygon",{points:"10,68 10,72 35,70",fill:"url(#needleGradient)",stroke:"#6b7280",strokeWidth:"0.5"}),e.jsx("polygon",{points:"8,70 10,68 10,72",fill:"#4b5563"}),e.jsx("line",{x1:"12",y1:"69",x2:"33",y2:"69.5",stroke:"rgba(255, 255, 255, 0.6)",strokeWidth:"0.5"})]}),e.jsx("rect",{x:"55",y:"45",width:"220",height:"50",rx:"6",fill:"url(#barrelGradient)",stroke:"rgba(255, 255, 255, 0.3)",strokeWidth:"2"}),e.jsx("rect",{x:"60",y:"52",width:"210",height:"36",rx:"3",fill:"rgba(0, 0, 0, 0.2)",stroke:"rgba(255, 255, 255, 0.1)",strokeWidth:"1"}),Array.from({length:11}).map((B,o)=>{const l=60+o*(x/10),r=o%2===0;return e.jsxs("g",{children:[e.jsx("line",{x1:l,y1:r?45:48,x2:l,y2:"52",stroke:"rgba(255, 255, 255, 0.4)",strokeWidth:r?"1.5":"1"}),r&&e.jsx("text",{x:l,y:"40",fontSize:"11",fontWeight:"600",fill:"var(--text-secondary)",textAnchor:"middle",fontFamily:"Inter, sans-serif",children:o*10})]},o)}),u>0&&e.jsxs("g",{children:[e.jsx("rect",{x:"60",y:"53",width:u,height:"34",rx:"2",fill:"url(#liquidGradient)"}),e.jsx("rect",{x:"60",y:"53",width:u,height:"12",rx:"2",fill:"url(#reflection)",opacity:"0.6"}),e.jsx("ellipse",{cx:60+u,cy:"70",rx:"3",ry:"15",fill:"rgba(59, 130, 246, 0.3)"})]}),e.jsx("rect",{x:"58",y:"48",width:"214",height:"18",rx:"4",fill:"url(#reflection)",opacity:"0.3"}),e.jsxs("g",{transform:`translate(${u}, 0)`,children:[e.jsx("rect",{x:"60",y:"54",width:"6",height:"32",rx:"1",fill:"url(#plungerGradient)"}),e.jsx("rect",{x:"66",y:"67",width:"50",height:"6",rx:"3",fill:"#6b7280",stroke:"#4b5563",strokeWidth:"1"}),e.jsxs("g",{children:[e.jsx("circle",{cx:"116",cy:"70",r:"16",fill:"#374151",stroke:"#4b5563",strokeWidth:"2"}),e.jsx("circle",{cx:"116",cy:"70",r:"12",fill:"#1f2937"}),e.jsx("circle",{cx:"116",cy:"70",r:"8",fill:"none",stroke:"#4b5563",strokeWidth:"1"}),e.jsx("circle",{cx:"116",cy:"70",r:"5",fill:"none",stroke:"#4b5563",strokeWidth:"0.5"})]})]}),e.jsxs("g",{children:[e.jsx("rect",{x:"268",y:"40",width:"4",height:"60",rx:"2",fill:"rgba(255, 255, 255, 0.2)"}),e.jsx("rect",{x:"273",y:"40",width:"4",height:"60",rx:"2",fill:"rgba(255, 255, 255, 0.2)"})]})]}),e.jsxs("div",{style:{marginTop:"20px",fontSize:"1.25rem",fontWeight:"700",background:"var(--gradient-primary)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",letterSpacing:"0.02em"},children:[y.toFixed(1)," Units"]}),e.jsx("div",{style:{fontSize:"0.875rem",color:"var(--text-muted)",marginTop:"4px"},children:"Draw to this mark on your syringe"})]})},W="peptide_saved_calculations",G=Object.keys(N),q=[{id:"u100",name:"U-100 (1ml)",unitsPerMl:100,maxUnits:100},{id:"u50",name:"U-50 (0.5ml)",unitsPerMl:100,maxUnits:50},{id:"u40",name:"U-40",unitsPerMl:40,maxUnits:40}],st=[.5,1,1.5,2,2.5,3],nt=()=>{try{const a=localStorage.getItem(W);return a?JSON.parse(a):[]}catch{return[]}},it=()=>{const[a,p]=i.useState(""),[y,x]=i.useState("5"),[b,u]=i.useState("2"),[B,o]=i.useState("250"),[l,r]=i.useState("mcg"),[C,k]=i.useState("u100"),j=parseFloat(y)||0,v=parseFloat(b)||0,h=parseFloat(B)||0,[U,S]=i.useState(!1),[g,I]=i.useState(nt),[A,M]=i.useState(!1),w=i.useRef(null),D=i.useMemo(()=>{if(!a)return G.slice(0,8);const s=a.toLowerCase();return G.filter(n=>n.toLowerCase().includes(s)).slice(0,8)},[a]),f=i.useMemo(()=>N[a]||null,[a]),R=i.useMemo(()=>{if(!f)return[100,250,500,1e3];const s=f.commonDosage||"",n=s.match(/(\d+(?:\.\d+)?)/g);if(n&&n.length>0){const d=n.map(m=>parseFloat(m));return d[0]<10&&s.toLowerCase().includes("mg")?d.map(m=>m*1e3):d}return[100,250,500,1e3]},[f]);i.useEffect(()=>{const s=n=>{w.current&&!w.current.contains(n.target)&&S(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const c=i.useMemo(()=>{if(j<=0||v<=0||h<=0)return null;const s=q.find(J=>J.id===C),n=s?.unitsPerMl||100,d=s?.maxUnits||100,m=l==="mg"?h*1e3:h,_=j*1e3,P=_/v,L=m/P,T=L*n,H=Math.floor(_/m),Y=T>d;return{concentration:P,drawMl:L.toFixed(4),units:T.toFixed(1),dosesPerVial:H,isOverMax:Y,maxUnits:d}},[j,v,h,l,C]),V=s=>{p(s),S(!1);const n=N[s];if(n){const d=n.commonDosage||"",m=d.match(/(\d+(?:\.\d+)?)/g);if(m&&m.length>0){const _=parseFloat(m[0]);d.toLowerCase().includes("mg")&&_<10?(o(String(_)),r("mg")):(o(String(_)),r("mcg"))}}},E=()=>{const n=[{id:Date.now(),peptide:a||"Custom",vialAmount:j,waterAmount:v,doseAmount:h,doseUnit:l,syringeType:C},...g.slice(0,9)];I(n),localStorage.setItem(W,JSON.stringify(n))},z=s=>{p(s.peptide),x(String(s.vialAmount)),u(String(s.waterAmount)),o(String(s.doseAmount)),r(s.doseUnit||"mcg"),k(s.syringeType||"u100"),M(!1)},F=s=>{const n=g.filter(d=>d.id!==s);I(n),localStorage.setItem(W,JSON.stringify(n))},O=()=>{p(""),x("5"),u("2"),o("250"),r("mcg"),k("u100")};return e.jsxs("div",{className:t.container,children:[e.jsxs("div",{className:t.pageHeader,children:[e.jsxs("div",{className:t.headerLeft,children:[e.jsx($,{size:28,className:t.headerIcon}),e.jsxs("div",{children:[e.jsx("h1",{children:"Reconstitution Calculator"}),e.jsx("p",{children:"Calculate exact syringe draw volumes"})]})]}),e.jsxs("div",{className:t.headerActions,children:[e.jsxs("button",{className:`${t.iconBtn} ${A?t.iconBtnActive:""}`,onClick:()=>M(!A),title:"Saved calculations",children:[e.jsx(K,{size:20}),g.length>0&&e.jsx("span",{className:t.badge,children:g.length})]}),e.jsx("button",{className:t.iconBtn,onClick:O,title:"Reset",children:e.jsx(Q,{size:20})})]})]}),A&&e.jsxs("div",{className:`card glass-panel ${t.savedPanel}`,children:[e.jsx("h3",{children:"Saved Calculations"}),g.length===0?e.jsx("p",{className:t.noSaved,children:"No saved calculations yet"}):e.jsx("div",{className:t.savedList,children:g.map(s=>e.jsxs("div",{className:t.savedItem,children:[e.jsxs("button",{className:t.savedItemBtn,onClick:()=>z(s),children:[e.jsx("span",{className:t.savedPeptide,children:s.peptide}),e.jsxs("span",{className:t.savedDetails,children:[s.vialAmount,"mg / ",s.waterAmount,"ml → ",s.doseAmount,s.doseUnit]})]}),e.jsx("button",{className:t.deleteBtn,onClick:()=>F(s.id),children:e.jsx(Z,{size:16})})]},s.id))})]}),e.jsxs("div",{className:"card glass-panel",children:[e.jsxs("div",{className:t.inputGroup,ref:w,children:[e.jsxs("label",{className:t.label,children:[e.jsx(X,{size:16}),"Peptide"]}),e.jsxs("div",{className:t.autocompleteWrapper,children:[e.jsx("input",{type:"text",placeholder:"Search or type peptide name...",value:a,onChange:s=>p(s.target.value),onFocus:()=>S(!0),className:t.input,autoComplete:"off"}),e.jsx(ee,{size:18,className:`${t.chevron} ${U?t.chevronUp:""}`}),U&&D.length>0&&e.jsx("div",{className:t.autocomplete,children:D.map(s=>e.jsxs("button",{type:"button",className:t.autocompleteItem,onClick:()=>V(s),children:[e.jsx("span",{children:s}),e.jsx("span",{className:t.peptideCategory,children:N[s]?.category})]},s))})]}),f&&e.jsxs("p",{className:t.peptideHint,children:["Common: ",f.commonDosage]})]}),e.jsxs("div",{className:t.inputGroup,children:[e.jsxs("label",{className:t.label,children:[e.jsx($,{size:16}),"Vial Quantity"]}),e.jsxs("div",{className:t.inputWithUnit,children:[e.jsx("input",{type:"number",value:y,onChange:s=>x(s.target.value),onWheel:s=>s.target.blur(),step:"1",min:"0",className:t.input}),e.jsx("span",{className:t.unitLabel,children:"mg"})]}),e.jsx("div",{className:t.quickButtons,children:[5,10,15,20].map(s=>e.jsxs("button",{className:`${t.quickBtn} ${j===s?t.quickBtnActive:""}`,onClick:()=>x(String(s)),children:[s,"mg"]},s))})]}),e.jsxs("div",{className:t.inputGroup,children:[e.jsxs("label",{className:t.label,children:[e.jsx(te,{size:16}),"Bacteriostatic Water"]}),e.jsxs("div",{className:t.inputWithUnit,children:[e.jsx("input",{type:"number",value:b,onChange:s=>u(s.target.value),onWheel:s=>s.target.blur(),step:"0.5",min:"0",className:t.input}),e.jsx("span",{className:t.unitLabel,children:"ml"})]}),e.jsx("div",{className:t.quickButtons,children:st.map(s=>e.jsxs("button",{className:`${t.quickBtn} ${v===s?t.quickBtnActive:""}`,onClick:()=>u(String(s)),children:[s,"ml"]},s))})]}),e.jsxs("div",{className:t.inputGroup,children:[e.jsxs("label",{className:t.label,children:[e.jsx(se,{size:16}),"Desired Dose"]}),e.jsxs("div",{className:t.doseInputRow,children:[e.jsx("input",{type:"number",value:B,onChange:s=>o(s.target.value),onWheel:s=>s.target.blur(),step:l==="mg"?"0.1":"50",min:"0",className:t.input}),e.jsxs("div",{className:t.unitToggle,children:[e.jsx("button",{className:`${t.unitBtn} ${l==="mcg"?t.unitBtnActive:""}`,onClick:()=>r("mcg"),children:"mcg"}),e.jsx("button",{className:`${t.unitBtn} ${l==="mg"?t.unitBtnActive:""}`,onClick:()=>r("mg"),children:"mg"})]})]}),e.jsx("div",{className:t.quickButtons,children:R.map(s=>e.jsx("button",{className:`${t.quickBtn} ${h===s&&l==="mcg"?t.quickBtnActive:""}`,onClick:()=>{o(String(s)),r("mcg")},children:s>=1e3?`${s/1e3}mg`:`${s}mcg`},s))})]}),e.jsxs("div",{className:t.inputGroup,children:[e.jsx("label",{className:t.label,children:"Syringe Type"}),e.jsx("div",{className:t.syringeTypes,children:q.map(s=>e.jsx("button",{className:`${t.syringeBtn} ${C===s.id?t.syringeBtnActive:""}`,onClick:()=>k(s.id),children:s.name},s.id))})]}),c&&e.jsxs("div",{className:t.resultContainer,children:[c.isOverMax&&e.jsxs("div",{className:t.warning,children:["⚠️ Dose exceeds syringe capacity (",c.maxUnits," units max). Use more water or a larger syringe."]}),e.jsxs("div",{className:t.resultCard,children:[e.jsx("span",{className:t.resultLabel,children:"Draw to Tick Mark"}),e.jsx("span",{className:`${t.resultValue} ${c.isOverMax?t.resultWarning:""}`,children:c.units}),e.jsx("span",{className:t.resultUnit,children:"Units"})]}),e.jsx(tt,{units:Math.min(parseFloat(c.units),c.maxUnits),maxUnits:c.maxUnits}),e.jsxs("div",{className:t.details,children:[e.jsxs("div",{className:t.detailRow,children:[e.jsx("span",{children:"Volume to Draw:"}),e.jsxs("span",{children:[c.drawMl," ml"]})]}),e.jsxs("div",{className:t.detailRow,children:[e.jsx("span",{children:"Concentration:"}),e.jsxs("span",{children:[c.concentration.toFixed(1)," mcg/ml"]})]}),e.jsxs("div",{className:t.detailRow,children:[e.jsx("span",{children:"Doses per Vial:"}),e.jsxs("span",{className:t.dosesValue,children:[c.dosesPerVial," doses"]})]})]}),e.jsxs("button",{className:t.saveBtn,onClick:E,children:[e.jsx(ne,{size:18}),"Save This Calculation"]})]})]}),e.jsxs("div",{className:t.infoBox,children:[e.jsx(ie,{size:16}),e.jsxs("div",{children:[e.jsx("strong",{children:"U-100 Insulin Syringe:"})," Most common. 100 units = 1ml.",e.jsx("br",{}),e.jsx("strong",{children:"Tip:"})," Add a little extra BAC water for easier dosing."]})]})]})},ct=()=>e.jsx("div",{className:"padding-container",style:{padding:"20px"},children:e.jsx(it,{})});export{ct as default};
