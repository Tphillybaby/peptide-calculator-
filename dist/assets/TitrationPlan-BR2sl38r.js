import{j as e}from"./vendor-charts-Bp3-pUCH.js";import{r}from"./vendor-react-CXiJbH0b.js";import{u as C,d as $,S as F,s as E}from"./index-3qoV_L3a.js";import{a7 as L,D as z,q as M,p as R,k as O,a2 as H,aJ as U}from"./vendor-ui-DZIkMbEy.js";import"./vendor-utils-CWRG567-.js";import"./vendor-pdf-BHURsPEW.js";import"./vendor-supabase-cfKfdWz3.js";const V="_container_q36ho_1",J="_headerActions_q36ho_7",K="_primaryBtn_q36ho_12",Y="_settingRow_q36ho_37",Z="_header_q36ho_7",Q="_title_q36ho_57",X="_subtitle_q36ho_66",ee="_exportBtn_q36ho_71",te="_setupGrid_q36ho_90",se="_setupCard_q36ho_97",ne="_select_q36ho_113",ae="_dateInput_q36ho_114",oe="_drugCategory_q36ho_125",re="_protocolDesc_q36ho_126",ie="_weightInputs_q36ho_131",ce="_arrow_q36ho_158",de="_weightDiff_q36ho_163",le="_timeline_q36ho_170",ue="_steps_q36ho_185",he="_stepCard_q36ho_199",pe="_past_q36ho_207",me="_current_q36ho_211",ge="_stepIndicator_q36ho_215",_e="_currentDot_q36ho_244",xe="_stepContent_q36ho_264",je="_stepHeader_q36ho_277",De="_stepDose_q36ho_284",fe="_stepWeek_q36ho_290",we="_stepDates_q36ho_299",ye="_stepNotes_q36ho_308",ke="_currentBadge_q36ho_314",ve="_infoBox_q36ho_328",Ne="_premiumGate_q36ho_362",Se="_premiumCard_q36ho_370",qe="_lockIcon_q36ho_379",Ce="_upgradeBtn_q36ho_408",s={container:V,headerActions:J,primaryBtn:K,settingRow:Y,header:Z,title:Q,subtitle:X,exportBtn:ee,setupGrid:te,setupCard:se,select:ne,dateInput:ae,drugCategory:oe,protocolDesc:re,weightInputs:ie,arrow:ce,weightDiff:de,timeline:le,steps:ue,stepCard:he,past:pe,current:me,stepIndicator:ge,currentDot:_e,stepContent:xe,stepHeader:je,stepDose:De,stepWeek:fe,stepDates:we,stepNotes:ye,currentBadge:ke,infoBox:ve,premiumGate:Ne,premiumCard:Se,lockIcon:qe,upgradeBtn:Ce},q={semaglutide:{name:"Semaglutide (Ozempic/Wegovy)",category:"GLP-1 Agonist",frequency:"Weekly",protocols:[{name:"Standard FDA Protocol",description:"FDA-approved escalation for weight management",steps:[{week:1,duration:4,dose:.25,unit:"mg",notes:"Starting dose - expect some nausea"},{week:5,duration:4,dose:.5,unit:"mg",notes:"First increase"},{week:9,duration:4,dose:1,unit:"mg",notes:"Therapeutic dose"},{week:13,duration:4,dose:1.7,unit:"mg",notes:"Optional increase"},{week:17,duration:0,dose:2.4,unit:"mg",notes:"Maximum dose"}]},{name:"Slow Titration",description:"For those sensitive to GI effects",steps:[{week:1,duration:6,dose:.25,unit:"mg",notes:"Extended starting phase"},{week:7,duration:6,dose:.5,unit:"mg",notes:"Gradual increase"},{week:13,duration:0,dose:1,unit:"mg",notes:"May stay here long-term"}]}]},tirzepatide:{name:"Tirzepatide (Mounjaro/Zepbound)",category:"GIP/GLP-1 Dual Agonist",frequency:"Weekly",protocols:[{name:"Standard Protocol",description:"FDA-approved titration",steps:[{week:1,duration:4,dose:2.5,unit:"mg",notes:"Starting dose"},{week:5,duration:4,dose:5,unit:"mg",notes:"First therapeutic dose"},{week:9,duration:4,dose:7.5,unit:"mg",notes:"Increase if tolerated"},{week:13,duration:4,dose:10,unit:"mg",notes:"Strong therapeutic dose"},{week:17,duration:4,dose:12.5,unit:"mg",notes:"Near maximum"},{week:21,duration:0,dose:15,unit:"mg",notes:"Maximum approved dose"}]}]},liraglutide:{name:"Liraglutide (Saxenda)",category:"GLP-1 Agonist",frequency:"Daily",protocols:[{name:"Standard Daily Protocol",description:"FDA-approved daily titration",steps:[{week:1,duration:1,dose:.6,unit:"mg",notes:"Week 1"},{week:2,duration:1,dose:1.2,unit:"mg",notes:"Week 2"},{week:3,duration:1,dose:1.8,unit:"mg",notes:"Week 3"},{week:4,duration:1,dose:2.4,unit:"mg",notes:"Week 4"},{week:5,duration:0,dose:3,unit:"mg",notes:"Maintenance dose"}]}]},retatrutide:{name:"Retatrutide",category:"Triple Agonist",frequency:"Weekly",protocols:[{name:"Clinical Trial Protocol",description:"Based on phase 2 trial escalation",steps:[{week:1,duration:4,dose:1,unit:"mg",notes:"Low starting dose"},{week:5,duration:4,dose:2,unit:"mg",notes:"First increase"},{week:9,duration:4,dose:4,unit:"mg",notes:"Mid-range dose"},{week:13,duration:4,dose:8,unit:"mg",notes:"Higher dose"},{week:17,duration:0,dose:12,unit:"mg",notes:"Maximum studied"}]}]},mk677:{name:"MK-677 (Ibutamoren)",category:"GH Secretagogue",frequency:"Daily (Oral)",protocols:[{name:"Standard Protocol",description:"Common dosing approach",steps:[{week:1,duration:2,dose:12.5,unit:"mg",notes:"Half dose to assess tolerance"},{week:3,duration:0,dose:25,unit:"mg",notes:"Full dose - take at night"}]},{name:"Low Dose Protocol",description:"For those experiencing side effects",steps:[{week:1,duration:0,dose:10,unit:"mg",notes:"Lower dose, fewer sides"}]}]}},be=({isPremium:u=!1})=>{const{user:w}=C(),[h,x]=r.useState("semaglutide"),[p,j]=r.useState(0),[o,y]=r.useState(new Date().toISOString().split("T")[0]),[l,b]=r.useState(""),[_,P]=r.useState("");if(!u)return e.jsx("div",{className:s.premiumGate,children:e.jsxs("div",{className:s.premiumCard,children:[e.jsx(L,{size:48,className:s.lockIcon}),e.jsx("h2",{children:"Premium Feature"}),e.jsx("p",{children:"Titration Planner is a premium feature that helps you:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Plan your dose escalation schedule"}),e.jsx("li",{children:"Get calendar reminders for dose changes"}),e.jsx("li",{children:"Track your progress and adjust as needed"}),e.jsx("li",{children:"Export your plan to share with your doctor"}),e.jsx("li",{children:"Access FDA-approved and alternative protocols"})]}),e.jsx("button",{className:s.upgradeBtn,children:"Upgrade to Premium"})]})});const i=q[h],m=i.protocols[p],D=r.useMemo(()=>{const t=[];let n=new Date(o);return m.steps.forEach((a,d)=>{const c=new Date(n),G=a.duration>0?new Date(n.setDate(n.getDate()+a.duration*7-1)):null;t.push({...a,startDate:c,endDate:G,weekNumber:a.week,isFirst:d===0,isLast:d===m.steps.length-1}),a.duration>0&&(n=new Date(n.setDate(n.getDate()+1)))}),t},[o,m]),g=t=>t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),f=t=>{const n=new Date;return t.endDate?n>=t.startDate&&n<=t.endDate:n>=t.startDate},k=t=>{const n=new Date;return t.endDate?n>t.endDate:!1},I=()=>{const t=`${i.name} Titration Plan
Protocol: ${m.name}
Start Date: ${g(new Date(o))}

`+D.map(c=>`Week ${c.weekNumber}: ${c.dose}${c.unit} - Starting ${g(c.startDate)}`+(c.endDate?` to ${g(c.endDate)}`:" (ongoing)")+`
  Notes: ${c.notes}`).join(`

`),n=new Blob([t],{type:"text/plain"}),a=URL.createObjectURL(n),d=document.createElement("a");d.href=a,d.download=`titration-plan-${h}.txt`,d.click()},{createRecurringSchedule:B}=$(),[v,N]=r.useState(!1),[S,T]=r.useState(1),W=async()=>{if(confirm("This will create schedule entries for the entire duration of the plan. Continue?")){N(!0);try{let t=[];i.frequency.includes("Daily")?t=[0,1,2,3,4,5,6]:t=[parseInt(S)];let n=0;for(const a of D){if(!a.endDate&&!a.duration)continue;const d=a.endDate||new Date(new Date(a.startDate).setDate(new Date(a.startDate).getDate()+28));await B({name:`${i.name} - Phase ${a.weekNumber}`,peptide:i.name.split(" ")[0],dosage:a.dose,unit:a.unit,time:"08:00",recurrenceDays:t,notes:a.notes},a.startDate,d),n++}alert(`Successfully created schedules for ${n} phases! Check your calendar.`)}catch(t){console.error("Error applying to schedule:",t),alert("Failed to save schedule. Please try again.")}finally{N(!1)}}},A=[{id:0,label:"Sunday"},{id:1,label:"Monday"},{id:2,label:"Tuesday"},{id:3,label:"Wednesday"},{id:4,label:"Thursday"},{id:5,label:"Friday"},{id:6,label:"Saturday"}];return e.jsxs("div",{className:s.container,children:[e.jsxs("div",{className:s.header,children:[e.jsxs("div",{children:[e.jsx("h1",{className:s.title,children:"Titration Planner"}),e.jsx("p",{className:s.subtitle,children:"Plan and track your dose escalation schedule"})]}),e.jsxs("div",{className:s.headerActions,children:[e.jsx("button",{className:s.primaryBtn,onClick:W,disabled:v,children:v?"Scheduling...":"Add to Calendar"}),e.jsxs("button",{className:s.exportBtn,onClick:I,children:[e.jsx(z,{size:18}),"Export"]})]})]}),e.jsxs("div",{className:s.setupGrid,children:[e.jsxs("div",{className:s.setupCard,children:[e.jsx("h3",{children:"Select Medication"}),e.jsx("select",{value:h,onChange:t=>{x(t.target.value),j(0)},className:s.select,children:Object.entries(q).map(([t,n])=>e.jsx("option",{value:t,children:n.name},t))}),e.jsxs("span",{className:s.drugCategory,children:[i.category," • ",i.frequency]})]}),e.jsxs("div",{className:s.setupCard,children:[e.jsx("h3",{children:"Select Protocol"}),e.jsx("select",{value:p,onChange:t=>j(parseInt(t.target.value)),className:s.select,children:i.protocols.map((t,n)=>e.jsx("option",{value:n,children:t.name},n))}),e.jsx("span",{className:s.protocolDesc,children:m.description})]}),e.jsxs("div",{className:s.setupCard,children:[e.jsx("h3",{children:"Schedule Settings"}),e.jsxs("div",{className:s.settingRow,children:[e.jsx("label",{children:"Start Date"}),e.jsx("input",{type:"date",value:o,onChange:t=>y(t.target.value),className:s.dateInput})]}),!i.frequency.includes("Daily")&&e.jsxs("div",{className:s.settingRow,children:[e.jsx("label",{children:"Injection Day"}),e.jsx("select",{value:S,onChange:t=>T(parseInt(t.target.value)),className:s.select,children:A.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))})]})]}),e.jsxs("div",{className:s.setupCard,children:[e.jsx("h3",{children:"Weight Tracking (Optional)"}),e.jsxs("div",{className:s.weightInputs,children:[e.jsxs("div",{children:[e.jsx("label",{children:"Current"}),e.jsx("input",{type:"number",placeholder:"lbs",value:l,onChange:t=>b(t.target.value)})]}),e.jsx(M,{size:20,className:s.arrow}),e.jsxs("div",{children:[e.jsx("label",{children:"Goal"}),e.jsx("input",{type:"number",placeholder:"lbs",value:_,onChange:t=>P(t.target.value)})]})]}),l&&_&&e.jsxs("span",{className:s.weightDiff,children:["Target loss: ",l-_," lbs (",Math.round((l-_)/l*100),"%)"]})]})]}),e.jsxs("div",{className:s.timeline,children:[e.jsx("h2",{children:"Your Titration Schedule"}),e.jsx("div",{className:s.steps,children:D.map((t,n)=>e.jsxs("div",{className:`${s.stepCard} ${f(t)?s.current:""} ${k(t)?s.past:""}`,children:[e.jsx("div",{className:s.stepIndicator,children:k(t)?e.jsx(R,{size:16}):f(t)?e.jsx("div",{className:s.currentDot}):e.jsx("span",{children:n+1})}),e.jsxs("div",{className:s.stepContent,children:[e.jsxs("div",{className:s.stepHeader,children:[e.jsxs("span",{className:s.stepDose,children:[t.dose," ",t.unit]}),e.jsxs("span",{className:s.stepWeek,children:["Week ",t.weekNumber,t.duration>0?`-${t.weekNumber+t.duration-1}`:"+"]})]}),e.jsxs("div",{className:s.stepDates,children:[e.jsx(O,{size:14}),g(t.startDate),t.endDate&&` → ${g(t.endDate)}`,!t.endDate&&" → Ongoing"]}),e.jsx("p",{className:s.stepNotes,children:t.notes}),f(t)&&e.jsxs("div",{className:s.currentBadge,children:[e.jsx(H,{size:14}),"Current Phase"]})]})]},n))})]}),e.jsxs("div",{className:s.infoBox,children:[e.jsx(U,{size:20}),e.jsxs("div",{children:[e.jsx("h4",{children:"Important Reminders"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Only increase dose if you're tolerating current dose well"}),e.jsx("li",{children:"Stay at current dose longer if experiencing significant side effects"}),e.jsx("li",{children:"Consult your healthcare provider before making changes"}),e.jsx("li",{children:"This planner is for reference only - follow your provider's guidance"})]})]})]})]})},$e=()=>{const{user:u}=C(),[w,h]=r.useState(!1),[x,p]=r.useState(!0);return r.useEffect(()=>{(async()=>{if(!u){p(!1);return}try{const{data:o,error:y}=await E.from("user_subscriptions").select("plan, status, current_period_end").eq("user_id",u.id).single();if(o&&o.status==="active"&&["premium","pro"].includes(o.plan)){const l=!o.current_period_end||new Date(o.current_period_end)>new Date;h(l)}}catch{console.log("No subscription found")}finally{p(!1)}})()},[u]),x?e.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx(F,{title:"Titration Planner | Dose Escalation Schedule",description:"Plan your semaglutide, tirzepatide, or peptide dose escalation. Visual timeline with reminders and export options.",keywords:"titration planner, semaglutide dosing, tirzepatide schedule, dose escalation"}),e.jsx(be,{isPremium:w})]})};export{$e as default};
